<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProConnect</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav class="navbar">
      <!-- Left: Logo -->
      <div class="logo">
        <a href="#">
          <h2>ProConnect</h2>
        </a>
      </div>

      <!-- Middle: Navigation Links -->
      <ul class="nav-links">
        <li><a href="Messages/messages.html">Messages</a></li>
        <li><a href="Post/post.html">Posts</a></li>
        <li><a href="connections/connection.html">Connections</a></li>
        <li><a href="./Profile/profile.html">Profile</a></li>
      </ul>

      <!-- Right: Login & Signup -->
      <div class="auth-buttons">
        <a href="Auth/login.html" class="login">Login</a>
        <a href="Auth/signup.html" class="signup">Signup</a>
      </div>
    </nav>

    <section class="hero">
      <div class="hero-content">
        <h1>Connect, Share, and Grow</h1>
        <p>
          ProConnect is a platform where professionals and innovators come
          together to share ideas, build connections, and collaborate on
          exciting projects.
        </p>
        <a href="#" class="cta-button">Get Started</a>
      </div>
    </section>
    <div class="chatbot-icon" id="chatbotIcon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-robot"
        viewBox="0 0 16 16"
      >
        <path
          d="M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"
        />
        <path
          d="M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"
        />
      </svg>
    </div>

    <!-- Chat Popup -->
    <div class="chat-popup" id="chatPopup">
      <div class="chat-header">Ask your doubt</div>
      <div class="chat-body" id="chatBody">
        <!-- Chat messages will appear here -->
      </div>
      <div class="chat-input">
        <input
          type="text"
          id="chatInput"
          placeholder="Type your question..."
          class="form-control"
        />
        <button id="sendBtn">Send</button>
      </div>
    </div>
    <script src="scripts/main.js"></script>
    <script>
      const chatbotIcon = document.getElementById("chatbotIcon");
      const chatPopup = document.getElementById("chatPopup");
      const sendBtn = document.getElementById("sendBtn");
      const chatInput = document.getElementById("chatInput");
      const chatBody = document.getElementById("chatBody");

      chatbotIcon.addEventListener("click", () => {
        chatPopup.style.display =
          chatPopup.style.display === "flex" ? "none" : "flex";
      });

      // Predefined Q&A pairs (add your 20 questions and answers here)
      const qaPairs = {
        // General Platform Queries
        "What is ProConnect?":
          "ProConnect is a platform where users and businesses can create accounts, connect, and share posts.",
        "Who can use ProConnect?":
          "Both individual users and businesses can use ProConnect to network and collaborate.",
        "Is ProConnect free to use?":
          "Yes, creating an account and posting on ProConnect is free.",
        "How do I sign up?":
          "Click on the 'Sign Up' button and fill in the required details.",
        "Can I use ProConnect on mobile?":
          "Yes, ProConnect is mobile-friendly and works on all devices.",
        "What features does ProConnect offer?":
          "User profiles, business accounts, post creation, networking, chat, and more.",
        "Can I delete my account?":
          "Yes, go to 'Settings' and select 'Delete Account'.",
        "Is my data safe on ProConnect?":
          "Yes, we use encryption and security protocols to protect your data.",

        // Business Accounts
        "What is a business account on ProConnect?":
          "A business account allows companies to showcase their brand, share posts, and connect with professionals.",
        "How do I create a business account?":
          "During signup, select 'Business' and fill in the required business details.",
        "Can a business account create posts?":
          "Yes, businesses can create posts to share updates, job openings, and announcements.",
        "Can businesses message users directly?":
          "Yes, businesses can communicate with users via direct messaging.",
        "Can I switch from a personal account to a business account?":
          "No, but you can create a separate business account.",

        // Posts & Engagement
        "How do I create a post on ProConnect?":
          "Click the 'Create Post' button, add text, images, or links, and publish it.",
        "Who can see my posts?":
          "Your posts are visible to your connections and followers.",
        "Can I edit my post after publishing?":
          "Yes, you can edit your post by clicking on the 'Edit' option.",
        "Can I delete my post?":
          "Yes, click on the 'Delete' option to remove your post.",
        "Can I report inappropriate content?":
          "Yes, click the 'Report' button on any post to report it.",
        "How do I like or comment on a post?":
          "Click the 'Like' button or type your comment in the comment section.",
        "Can I share posts from other users?":
          "Yes, you can share posts with your network.",

        // Chatbot & AI Assistance
        "What can the ProConnect chatbot do?":
          "The chatbot can answer queries, assist with navigation, and provide support.",
        "Can I chat with other users?":
          "Yes, you can send direct messages to other users and businesses.",
        "Is there an AI assistant for job searches?":
          "Yes, our AI assistant helps users find job listings and career opportunities.",

        // Networking & Connections
        "How do I connect with other users?":
          "You can send a connection request to users or businesses.",
        "Can I follow businesses?":
          "Yes, you can follow businesses to stay updated on their posts.",
        "Can I block a user?":
          "Yes, go to their profile and select the 'Block' option.",
        "How do I see my connections?":
          "Go to your profile and click on 'Connections'.",

        // Account & Security
        "How do I reset my password?":
          "Click on 'Forgot Password' on the login page and follow the instructions.",
        "How do I update my profile?":
          "Go to 'Profile' and click 'Edit' to update your information.",
        "Can I change my email address?":
          "Yes, go to 'Settings' and update your email.",
        "What do I do if I find a fake profile?":
          "Report the profile by clicking on 'Report User'.",
        "How can I deactivate my account?":
          "Go to 'Settings' and select 'Deactivate Account'.",

        // Job Opportunities
        "Does ProConnect offer job postings?":
          "Yes, businesses can post job openings.",
        "How do I apply for a job on ProConnect?":
          "Click on a job post and follow the application instructions.",
        "Can I post job openings on ProConnect?":
          "Yes, businesses can create job listings.",

        // Technical Support
        "I am facing issues with my account. What should I do?":
          "Contact support via the 'Help' section.",
        "ProConnect is not loading. What should I do?":
          "Try clearing your cache or using a different browser.",
        "How do I report a bug?": "Go to 'Support' and submit a bug report.",

        // Greetings
        Hi: "Hello! How can I assist you today?",
        Hello: "Hi there! What do you need help with?",
        Hey: "Hey! How can I help?",
        "Good morning": "Good morning! What would you like to know?",
        "Good afternoon": "Good afternoon! How can I assist you?",
        "Good evening": "Good evening! How can I help?",
        "How are you?": "I'm just a chatbot, but I'm here to assist you!",
        "What is your name?": "I'm your virtual assistant, here to help!",
        "What can you do?":
          "I can answer questions about ProConnect, accounts, networking, and more!",

        // Miscellaneous
        "How do I get the latest updates?":
          "Follow ProConnectâ€™s official blog and social media pages.",
        "Is there a mobile app for ProConnect?":
          "Currently, ProConnect is web-based, but a mobile app is coming soon.",
        "How do I report a scam?":
          "Use the 'Report' feature on suspicious profiles or posts.",
        "Where can I give feedback?":
          "Go to 'Support' and submit your feedback.",
      };

      /* --- Fuzzy Matching Functions --- */

      // Levenshtein distance algorithm to compute edit distance between two strings
      function levenshteinDistance(a, b) {
        const matrix = [];

        // Increment along the first column of each row
        for (let i = 0; i <= b.length; i++) {
          matrix[i] = [i];
        }

        // Increment each column in the first row
        for (let j = 0; j <= a.length; j++) {
          matrix[0][j] = j;
        }

        // Fill in the rest of the matrix
        for (let i = 1; i <= b.length; i++) {
          for (let j = 1; j <= a.length; j++) {
            if (b.charAt(i - 1) === a.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
            } else {
              matrix[i][j] = Math.min(
                matrix[i - 1][j - 1] + 1, // substitution
                matrix[i][j - 1] + 1, // insertion
                matrix[i - 1][j] + 1 // deletion
              );
            }
          }
        }
        return matrix[b.length][a.length];
      }

      // Function to get a similarity score between 0 and 1
      function getSimilarity(a, b) {
        const distance = levenshteinDistance(a, b);
        return 1 - distance / Math.max(a.length, b.length);
      }

      // Enhanced getBotResponse using fuzzy matching
      function getBotResponse(userInput) {
        let bestMatch = null;
        let bestScore = 0;

        // Compare user input with each predefined question
        for (let question in qaPairs) {
          const score = getSimilarity(
            userInput.toLowerCase(),
            question.toLowerCase()
          );
          if (score > bestScore) {
            bestScore = score;
            bestMatch = question;
          }
        }

        // If the best match score is above a threshold (e.g., 0.5), return its answer
        if (bestScore >= 0.5) {
          return qaPairs[bestMatch];
        }
        return "I'm sorry, I don't understand that. Could you please ask a different question?";
      }

      // Append messages to the chat body
      function appendMessage(sender, text) {
        const messageDiv = document.createElement("div");
        messageDiv.classList.add(
          "message",
          sender === "user" ? "user-msg" : "bot-msg"
        );
        messageDiv.textContent = text;
        chatBody.appendChild(messageDiv);
        chatBody.scrollTop = chatBody.scrollHeight;
      }

      // Send button click event handler
      sendBtn.addEventListener("click", () => {
        const userText = chatInput.value.trim();
        if (userText === "") return;

        // Append user message
        appendMessage("user", userText);

        // Get bot response using fuzzy matching logic
        const botResponse = getBotResponse(userText);

        // Simulate a small delay for a natural feel
        setTimeout(() => {
          appendMessage("bot", botResponse);
        }, 500);

        // Clear input field
        chatInput.value = "";
      });

      // Allow sending messages via the Enter key
      chatInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          sendBtn.click();
        }
      });
    </script>
  </body>
</html>
